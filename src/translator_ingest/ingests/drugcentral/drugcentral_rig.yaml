name: DrugCentral Reference Ingest Guide


# Information about the Source of the data ingest
source_info:
  infores_id: infores:drugcentral
  name: DrugCentral
  ## from https://pmc.ncbi.nlm.nih.gov/articles/PMC10692006/
  description: "DrugCentral is an open-access online drug information repository. It covers over 4950 drugs, incorporating structural, physicochemical, and pharmacological details to support drug discovery, development, and repositioning."
  citations:
    - https://pmc.ncbi.nlm.nih.gov/articles/PMC10939799/    ## 2024/5 IDG paper, has summary section on DrugCentral
    - https://pmc.ncbi.nlm.nih.gov/articles/PMC10692006/    ## 2023: awesome paper with more info on methods, underlying sources
    - https://pmc.ncbi.nlm.nih.gov/articles/PMC7881657/     ## 2021: accuracy issues
    - https://pmc.ncbi.nlm.nih.gov/articles/PMC9825566/     ## 2023 update
    - https://pmc.ncbi.nlm.nih.gov/articles/PMC7779058/     ## 2021 update
    - https://pmc.ncbi.nlm.nih.gov/articles/PMC6323925/     ## 2018 update
    - https://pmc.ncbi.nlm.nih.gov/articles/PMC5210665/     ## 2017 original paper
  terms_of_use_info:
    terms_of_use_url: "https://drugcentral.org/privacy"
    terms_of_use_description: "DrugCentral's webpage says DrugCentral is available under the Creative Commons license. In the 2023 papers, DrugCentral is described as available 'free of charge, without registration' (https://pmc.ncbi.nlm.nih.gov/articles/PMC10692006/#notes3) thru its website, public instance, a full database dump, and a Docker container (https://pmc.ncbi.nlm.nih.gov/articles/PMC9825566/#SEC6)."
    license name: "CC BY-SA"
  data_access_locations:
    - "Download and database access info: https://drugcentral.org/download"
  data_provision_mechanisms:
    - other   ## public database instance: this is what we're using
    - database_dump
    - file_download  ## this is partial and maybe not the latest version
  data_versioning_and_releases: "DrugCentral currently (late 2025) isn't being maintained due to lack of funding."
  # additional_notes:  # (optional, range = string)


# Information about Ingested Content (the scope, content, and rationale for what is included and excluded in this ingest)
ingest_info:
  ingest_categories:
  ## some data comes from other resources, others seem to be curated by drugcentral devs
    - aggregation_provider
    - primary_knowledge_provider
  utility: "DrugCentral provides data on drug uses (indications, contraindications, etc) and effects on genes/proteins. These edges could be used in MVP1 (may treat disease X), MVP2 (drug Y may increase/decrease gene Z's activity), or Pathfinder queries."
  # scope:  # (optional, range = string)

  relevant_files:
  ## these are actually database tables, not files
    - file_name: omop_relationship_doid_view
      location: "drugcentral:unmtid-dbs.net:5433"   ## database location
      description: "This view adds doid mapping to omop_relationship. Using just in case we later want to use other ID namespaces for DoP objects"
    - file_name: act_table_full
      location:  "drugcentral:unmtid-dbs.net:5433"   ## database location
      description: "drug bioactivity data (effect on genes/proteins)"

  included_content:
    - file_name: omop_relationship_doid_view
      included_records: >-
        (1) Have values in the columns/fields used (no missing values). (2) cui_semantic_type (UMLS
        semantic type) maps to DiseaseOrPhenotypicFeature or its descendants. 
        (3) unique triples (removed duplicate rows).
      fields_used: "struct_id, relationship_name, umls_cui, cui_semantic_type"
    - file_name: act_table_full
      included_records: >-
        Must have an action_type value - we interpret this as an assertion of a relationship (often
        a specific kind). VS an activity value, which doesn't necessarily mean a relationship (need a
        threshold for meaningful/actual effect)
      fields_used: "struct_id, accession, action_type, act_source, act_source_url"

  filtered_content:
    - file_name: omop_relationship_doid_view
      filtered_records: "umls_cui is C0085228 (Fluvoxamine)"
      rationale: >-
        This object isn't a DiseaseOrPhenotypicFeature and doesn't match the predicate (currently
        1 contraindication) or Association range constraints. However, contraindications based on other
        drugs used (due to adverse drug-drug interactions) are valid.
    - file_name: omop_relationship_doid_view
      filtered_records: "umls_cui is C0022650 (Kidney Calculi aka kidney stones)"
      rationale: >-
        NodeNorm currently maps these to AnatomicalEntity, which doesn't match the Association range constraint. This seems to be a NodeNorm issue.
    - file_name: act_table_full
      filtered_records: "act_source cannot be CHEMBL, IUPHAR, DRUGBANK, or KEGG DRUG"
      rationale: >-
        We are instead directly ingesting CHEMBL and IUPHAR (GuideToPharmacology aka gtopdb, based on the references in papers).
        We are not ingesting DrugBank (has restrictive licensing) or KEGG (may also have licensing issues, but we don't remember the reasoning behind this decision right now).

  future_considerations:
  # (required, range = ContentCategoryEnum: edge_content | node_property_content | edge_property_content | other)
    - category: edge_content
      consideration: >-
        Review KEGG resource/data for reasons not to ingest - we decided to do this but don't remember
        the reason why (licensing issues maybe?).
      relevant_files: act_table_full
    - category: edge_content
      consideration: >-
        Consider ingesting rows without an action_type value (threshold on act_value and/or keep rows
        marked as mechanism of action in moa column). With our current filter criteria, we only keep
        a small subset of the original rows. However, if we do this, we may want to adjust
        the action_type depending on primary source (see target_info.additional_notes). 
      relevant_files: act_table_full
    - category: edge_property_content
      consideration: >-
        Review other columns and consider ingesting them (activity value info, MOA info).
      relevant_files: act_table_full
    - category: edge_content
      consideration: >-
        Stop filtering out umls_cui C0085228 (Fluvoxamine), and instead map its record with relationship_name 'contraindication' to a different predicate/Association for drug-drug contraindications."
      relevant_files: omop_relationship_doid_view
    - category: other
      consideration: >-
        This resource has a LOT of tables, some of which could be sources of more edges or node attributes.
        The table vetomop is particularly interesting (drug veterinary indications for non-human animals).
        RTX-KG2 was ingesting more tables that may be sources of node attributes (see linked issue's
        comments, RTX-KG2's extract-drugcentral.sh).

  additional_notes: >- # (optional, range = string)
    (1) omop_relationship_doid_view seems to have some overlap with DAKP. May want to revisit (evaluate
        DrugCentral underlying sources, methods) and decide if DAKP can replace/be used instead
    (2) act_table_full's action_type values are defined in a different database table named
        'action_type'. This table also includes 'parent_type' and some values that aren't currently
        in act_table_full. It looks like an older version of Chembl's MOA values. 


# Information about the Graph Output by the ingest
target_info:
  infores_id: "infores:translator-drugcentral"

  edge_type_info:
    ## omop_relationship_doid_view: including all edge types even though predicates aren't descendants of each other
    - subject_categories:
        - biolink:ChemicalEntity
      predicates:
        - biolink:contraindicated_in
        - biolink:treats
        - biolink:preventative_for_condition
        - biolink:diagnoses
      object_categories:
        - biolink:DiseaseOrPhenotypicFeature
      agent_type:
        - manual_validation_of_automated_agent
      knowledge_level:
        - knowledge_assertion
      primary_knowledge_sources:
        - infores:drugcentral
      edge_properties:
        - "biolink:clinical_approval_status"    ## only for off_label_use records
      ## DRAFT: for Matt to review, write to his liking
      ui_explanation: >-
        Source DrugCentral data provides drug use assertions that were either extracted from the OMOP
        data model (up to 2012) or manually curated from approved drug labels (after 2012).
        The predicate of this edge is based on the relationship_name field of the original database row.
      source_files:
        - omop_relationship_doid_view
      additional_notes: >-
        (1) We're unsure on the agent_type choice and don't have concrete support. Matt thought DrugCentral
            used automated methods to do some initial NLP / extraction of candidate indications, which
            were then manually reviewed/validated. 
        (2) The table has no underlying source, reference, or date info that can be used to tell where a
            specific record/row came from (out of two possibilities, see next point).
        (3) The UI explanation origin info is based on https://pmc.ncbi.nlm.nih.gov/articles/PMC10692006/#Sec10. 
            The paper says 'indications, contraindications, and off-label uses have been extracted from the OMOP data model version 4.4 up to 2012' and 'all information after 2012 has been manually curated from approved drug labels'.
        (4) See ingest code's mapping.py for the relationship_name value to predicate/edge-attribute mapping. Notes: 'indication' means approved, on-label use according to
        https://pmc.ncbi.nlm.nih.gov/articles/PMC10692006/#Sec10; for 'off-label use', there was
        discussion on using the current 'treats' vs previous 'applied_to_treat'.
    ## act_table_full
    ## PLAIN INTERACTS_WITH
    - subject_categories:
        - biolink:ChemicalEntity
      predicates:
        - biolink:interacts_with
      object_categories:
        - biolink:Gene
        - biolink:Protein
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      primary_knowledge_sources:
      ## currently only 1 edge - act_source DRUG LABEL with act_source_url value
      ## can find this info in graph-metadata.json output file
        - infores:drugcentral
      edge_properties:
        - original_subject
        - original_object
        - publications
      ui_explanation: "The DrugCentral-reported 'action type' was 'OTHER' - without more information on the relationship type, we assigned the generic predicate for a drug-protein interaction."
      source_files:
        - act_table_full
      # additional_notes:  # (optional, range = string)
    ## SUBSTRATE
    - subject_categories:
        - biolink:Gene
        - biolink:Protein
      predicates:
        - biolink:has_substrate
      object_categories:
        - biolink:ChemicalEntity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      primary_knowledge_sources:
      ## currently only 4 edges - can find this info in graph-metadata.json output file
        - infores:drugcentral
        - infores:wombat-pk
      aggregator_knowledge_sources:
      ## when drugcentral isn't primary
        - infores:drugcentral
      edge_properties:
        - original_subject
        - original_object
        ## currently no edges have publications - can find this info in graph-metadata.json
      ui_explanation: "The DrugCentral-reported 'action type' was 'SUBSTRATE' - this means the chemical is a substrate of the protein."
      source_files:
        - act_table_full
      # additional_notes:  # (optional, range = string)
    ## "BINDING AGENT" or inferred physical interaction edges
    - subject_categories:
        - biolink:ChemicalEntity
      predicates:
        - biolink:directly_physically_interacts_with
      object_categories:
        - biolink:Gene
        - biolink:Protein
      qualifiers:
        ## only on non-inferred edges
        - property: "biolink:causal_mechanism_qualifier"
          value_enumeration:
            - "binding"
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent    ## see note in target_info.additional_notes
      primary_knowledge_sources: 
      ## can find this info in graph-metadata.json output file
        - infores:drugcentral
        - infores:wombat-pk
        - infores:drugmatrix
        - infores:pdsp-ki
      aggregator_knowledge_sources:
      ## when drugcentral isn't primary
        - infores:drugcentral
      edge_properties:
        - original_subject
        - original_object
        - publications    ## only on some edges
      ui_explanation: "The DrugCentral-reported action type either (1) corresponds to the predicate and causal_mechanism_qualifier OR (2) implied a physical-interaction (so Translator generated another edge to represent this)."
      source_files:
        - act_table_full
      # additional_notes:  # (optional, range = string)
    ## AFFECTS EDGES
    - subject_categories:
        - biolink:ChemicalEntity
      predicates:
        - biolink:affects
      object_categories:
        - biolink:Gene
        - biolink:Protein
      ## qualifiers depends on mode of action
      qualifiers:
        - property: biolink:qualified_predicate
          value_enumeration:
            - "biolink:causes"
        - property: biolink:object_aspect_qualifier
          value_enumeration:
            - activity
            - expression
            - stability
            - transport
        - property: biolink:object_direction_qualifier
          value_enumeration:
            - increased
            - decreased
        ## not listing since it's >10 unique values
        - property: biolink:causal_mechanism_qualifier
          value_range:
            - biolink:CausalMechanismQualifierEnum
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent    ## see note in target_info.additional_notes
      primary_knowledge_sources: 
      ## can find this info in graph-metadata.json output file
        - infores:drugcentral
        - infores:wombat-pk
        - infores:drugmatrix
        - infores:pdsp-ki
      aggregator_knowledge_sources:
      ## when drugcentral isn't primary
        - infores:drugcentral
      edge_properties:
        - original_subject
        - original_object
        - publications    ## only on some edges
      ui_explanation: "The qualifier-set is based on the DrugCentral-reported action type."
      source_files:
        - act_table_full
      additional_notes: "See mapping.py or Causal Mechanism Mappings google sheet for details."

  node_type_info:
    - node_category: biolink:ChemicalEntity
      source_identifier_types:
        - DRUGCENTRAL
    ## omop_relationship_doid_view
    - node_category: biolink:DiseaseOrPhenotypicFeature
      source_identifier_types:
        - UMLS
      additional_notes: >- # (optional, range = string)
        Using only umls_cui column for object ID because it's the most comprehensive (covers same rows as
        snomed_conceptid and doid plus a little more). I was worried that some IDs wouldn't actually be
        DiseaseOrPhenotypicFeatures, and that was addressed with filtering.
    ## act_table_full
    - node_category: Protein
      source_identifier_types:
        - UniProtKB
    - node_category: Gene
      source_identifier_types:
        - UniProtKB
      additional_notes: "NodeNorm with gene/protein conflation will map some UniProtKB IDs to Gene entities."

  future_considerations:  # (optional, multivalued, range = FutureModelingConsiderations) Notes on possible changes/additions to modeling in future iteration of the ingest
    # (optional, range = ModelingCategoryEnum: spoq_pattern | predicates | qualifiers | edge_properties | node_properties | other)
    - category: spoq_pattern
      consideration: >-
        Adjust the predicate domain for 'biolink:diagnoses'. It's currently 'diagnostic aid', and raises
        a validation warning on the DrugCentral 'diagnosis' record/edge from omop_relationship_doid_view.
        However, this record represents a legit use of a drug for diagnosis.
    - category: other
      consideration: >-
        NodeNorm should perhaps map UMLS:C0022650 (Kidney Calculi aka kidney stones) to the main clique for kidney stones MONDO:0008171 (primary label nephrolithiasis).

  additional_notes: >- # (optional, range = string)
    For act_table_full publications, we mapped some base urls to prefixes (PMID and DOI) and left
    others as-is.

    For act_table_full agent_type, we decided on manual_agent for all primary knowledge sources.
    (1) However, we are only ASSUMING manual curation of DrugMatrix and PDSP data because the subset we
        ingest (has action_type values) is a very small fraction of the total rows from those
        resources. We assume a person manually reviewed the rows with action_types and assigned those values, and that's why there's so few. This assumption has not been confirmed yet (by finding proof in DrugCentral, DrugMatrix, or PDSP papers).
        If we later include rows without an action_type value, this assumption will no longer be valid.
    (2) It's also unclear what agent_type should be assigned when act_source is 'UNKNOWN'.
    (3) On other primary sources: Colleen thinks 'WOMBAT-PK' devs curated data manually (reasoning
        recorded in https://github.com/NCATSTranslator/Translator-All/wiki/WOMBAT-PK). And it seems
        safe to assume DrugCentral curators did manual curation for 'SCIENTIFIC LITERATURE' and 'DRUG
        LABEL' (although Colleen didn't look for lines in DrugCentral papers saying these terms mean
        manual curation).


# Information about how the ingest was specified and performed
provenance_info:
  contributions:
    - "Colleen Xu - code author, data modeling"
    - "Matthew Brush - data modeling, domain expertise"
  artifacts:  # (optional, multivalued, range = string)
    - https://github.com/NCATSTranslator/Data-Ingest-Coordination-Working-Group/issues/53
    - "notebooks for development work currently in parser code directory"
    - "causal mechanism mapping sheet: https://docs.google.com/spreadsheets/d/1DeAE04O1mz3R9s3dCZpG2hQp9hwif5WjdkUMsBci-u8/edit?gid=392679103#gid=392679103"