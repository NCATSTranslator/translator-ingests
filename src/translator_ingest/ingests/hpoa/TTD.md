# HPOA Ingest Things to Do

- Need to implement a **`get_latest_version()`** method for HPOA ingest that reads the header lines of the phenotype.hpoa file to determine the latest version of the HPOA file being used.
- Need to fix **`modes_of_inheritance = read_ontology_to_exclusion_terms(ontology_obo_file=HPO_FILE_PATH)`** in **disease_to_phenotype.py** to be able to use mock data in unit tests
- convert disease_to_phenotype **`aspect == I`** -> inheritance parse from edge assertion into (annotated) disease node assertion (**_DESIGN DECISION TO MAKE THIS HPOA INGEST MODELLING CHANGE IS NOT YET FINALIZED AS OF MONDAY 11 AUG 2025_**)
    - Challenge is what Biolink Model design to use? Maybe see: https://github.com/biolink/biolink-model/issues/1064
- filter out **gene_to_phenotype_transform.py** to only transform MENDELIAN traits (problem: MENDELIAN is declared in _phenotype.hpoa_ while **gene_to_phenotype.txt** used to generate the relevant Associations)
- review strategy (with Kevin _et.al._) for incorporating **gene_to_phenotype.py** publications into **gene_to_phenotype_transform.py** ingest
    - Integration of publications into the **genes_to_phenotype_transform** scripting is complex, requiring the running of a "gene_to_phenotype_extras" script, to generate a file '_**data/hpoa/genes_to_phenotype_preprocessed.tsv**_' used. In Monarch, this file was generated by an extra Makefile step. Unclear where and how to (generically) do this in the Translator Transform pipeline. The Monarch Makefile says this (we have an extra directory layer 'hpoa' in the Translator Ingest world...)

```shell

data/genes_to_phenotype_preprocessed.tsv: download
	$(RUN) python scripts/gene_to_phenotype_extras.py

.PHONY: run
run: data/genes_to_phenotype_preprocessed.tsv
	$(RUN) koza transform --source src/monarch_phenotype_profile_ingest/gene_to_disease_transform.yaml
	$(RUN) koza transform --source src/monarch_phenotype_profile_ingest/gene_to_phenotype_transform.yaml
	$(RUN) koza transform --source src/monarch_phenotype_profile_ingest/disease_to_phenotype_transform.yaml
	$(RUN) koza transform --source src/monarch_phenotype_profile_ingest/disease_mode_of_inheritance_transform.yaml

```