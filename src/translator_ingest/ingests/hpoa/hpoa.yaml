id:  'infores:hpo-annotations'

# TODO: is this correct? Should it be the (non-space-included) name of the koza app passed into the transform.py?
name: 'Human Phenotype Ontology Annotations'

metadata: !include './metadata.yaml'
transform_code: 'src/translator_ingest/ingests/hpoa/hpoa.py'
readers:
  disease_to_phenotype:
    # TODO: is the 'name' tag redundant here, given the 'disease_to_phenotype' yaml key above?
    name: 'disease_to_phenotype'
    files:
      - 'data/hpoa/phenotype.hpoa'
    depends_on:
      - 'data/hpoa/hp.obo'
    header: 4
    format: 'csv'
    delimiter: '\t'
    # For a csv/tsv file, list expected columns
    columns:
      - 'database_id'
      - 'disease_name'
      - 'qualifier'
      - 'hpo_id'
      - 'reference'
      - 'evidence'
      - 'onset'
      - 'frequency'
      - 'sex'
      - 'modifier'
      - 'aspect'
      - 'biocuration'
  gene_to_disease:
    # TODO: is the 'name' tag redundant here, given the 'gene_to_disease' yaml key above?
    name: 'gene_to_disease'
    files:
      - './data/hpoa/genes_to_disease.txt'
    format: 'csv'
    delimiter: '\t'
    columns:
      - 'ncbi_gene_id'
      - 'gene_symbol'
      - 'association_type'
      - 'disease_id'
      - 'source'
  gene_to_phenotype:
    # TODO: is the 'name' tag redundant here, given the 'gene_to_phenotype' yaml key above?
    name: "gene_to_phenotype"
    header: 0
    format: 'csv'
    delimiter: '\t'
    columns:
      - 'ncbi_gene_id'
      - 'gene_symbol'
      - 'hpo_id'
      - 'hpo_name'
      - 'frequency'
      - 'disease_id'
      - 'publications'
      - 'gene_to_disease_association_types'
    filters:
      - inclusion: 'include'
        column: 'gene_to_disease_association_types'
        filter_code: 'in'
        value:
          - 'MENDELIAN'
  # TODO: is this the "best practices" location for the mondo map specification (as opposed to a distinct yaml file)?
  mondo_map:
    name: 'mondo_map'
    files:
      - './data/mondo.sssom.tsv'
    format: 'csv'
    delimiter: '\t'
    header: 51
    filters:
      - inclusion: 'include'
        column: 'predicate_id'
        filter_code: 'eq'
        value: 'skos:exactMatch'
    key: object_id
    values:
      - subject_id
    columns:
      - subject_id
      - subject_label
      - predicate_id
      - object_id
      - object_label
      - mapping_justification
