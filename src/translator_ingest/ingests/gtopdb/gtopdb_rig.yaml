## The IUPHAR/BPS Guide to PHARMACOLOGY (GtoPdb) Reference Ingest Guide (RIG)
name: The IUPHAR/BPS Guide to PHARMACOLOGY (GtoPdb) Reference Ingest Guide

## Information about the Source of the data ingest
source_info:
  infores_id: infores:gtopdb
  name: The IUPHAR/BPS Guide to PHARMACOLOGY (GtoPdb)
  description: "The IUPHAR/BPS Guide to PHARMACOLOGY (GtoPdb; https://www.guidetopharmacology.org) is an open-access, expert-curated, online
database that provides succinct overviews and key references for pharmacological targets and their recommended experimental ligands. It
includes over 3039 protein targets and 12,163 ligand molecules, including approved drugs, small molecules, peptides and antibodies. GtoPdb) was established
and developed by the International Union of Basic and Clinical Pharmacology (IUPHAR) and the British Pharmacological Society (BPS).
It originated from the IUPHAR-DB, a former resource focused on receptors and channels that was first compiled in 2003 and from the
BPS‘ Guide to Receptors and Channels’, a compendium of a wider range of targets than those originally covered in IUPHAR-DB"
  citations:
    - "Harding SD, Armstrong JF, Faccenda E, Southan C, Alexander SPH, Davenport AP, Spedding M, Davies JA. (2023) The IUPHAR/BPS Guide to PHARMACOLOGY in 2024. Nucl. Acids Res. 2024; 52(D1):D1438-D1449. doi:10.1093/nar/gkad944. [Full text]. PMID: 37897341."
  terms_of_use_info:
    license_name: "Creative Commons Attribution 4.0 International"
    license_url: "https://creativecommons.org/licenses/by/4.0/legalcode"
  data_access_locations:
    - "gtoPdb Downloads: https://www.guidetopharmacology.org/download.jsp (this page includes file sizes and simple data dictionaries for each download)"
  data_provision_mechanisms:
    - file_download
  data_formats:
    - csv
  data_versioning_and_releases: "Based on the FAQ section:
    Content expansion and feature enhancements are announced on the front page. Releases are approximately quarterly, designated as increments (e.g. 2024.4 in December 2024, 2024.3 in October 2023 etc.).
    The current database content for version 2025.3 released 10 September 2025. https://www.guidetopharmacology.org/databaseContent.jsp"

## Information about Ingested Content
ingest_info:
  ingest_categories:
    - primary_knowledge_provider
  utility: "The International Union of Basic and Clinical Pharmacology (IUPHAR) / British Pharmacological Society (BPS) Guide to PHARMACOLOGY is an expert-curated resource of ligand-activity-target relationships, the majority of which come from high-quality pharmacological and medicinal chemistry literature."
  scope: "GtoPdb includes over 3039 protein targets and 12,163 ligand molecules, including approved drugs, small molecules, peptides and antibodies."   # MHB: This is meant to describe the scope of the ingest, not the scope of the source (i.e. what subset of content we include in our ingest)

  relevant_files:              # MHB: Do you really include/use all of these files in the ingest? Qi: for this phase, no
    - file_name: "interactions.csv"
      location: "https://www.guidetopharmacology.org/DATA/interactions.csv"
      description: "all interaction data for ligands and targets"
    ## Qi review comment: following files can be downloaded from gtopdb, but now is not required for ingestion of gtopdb
    # - file_name: "targets_and_families.csv"
    #   location: "https://www.guidetopharmacology.org/DATA/targets_and_families.csv"
    #   description: "complete target and family list"
    ## Qi review comment: will need this to mapping between ligand id and pubchem CID
    - file_name: "ligands.csv"
      location: "https://www.guidetopharmacology.org/DATA/ligands.csv"
    #   description: "complete ligand list"
    # - file_name: "peptides.csv"
    #   location: "https://www.guidetopharmacology.org/DATA/peptides.csv"
    #   description: "complete peptide ligand list:"
    # - file_name: "GtP_to_HGNC_mapping.csv"
    #   location: "https://www.guidetopharmacology.org/DATA/GtP_to_HGNC_mapping.csv"
    #   description: "mapping Guide to PHARMACOLOGY target and peptide ligand IDs and URLs to HGNC gene IDs and symbols"

  included_content:
    - file_name: "interactions.csv"
      # MHB: Content of the included_records field above is not really what we look for here. See suggested text below - confirm its accuracy. Qi: Confirmed, thanks for adding an example!
      included_records: No filtering. Records for all species included.  Note however that records in the data describe results of a single published experiment. In our ingest records with the same ligand, target, and type + action are merged into a single edge, and metadata from each merged record (publications) combined into a list and attached to the edge.
      # MHB:  'Action' and 'Pubmed ID' and 'Endogenous' fields should also be used, right? See yellow highlighted columns here: https://docs.google.com/spreadsheets/d/1c6M71yrPNGTvH-LeKR75nf5iFOfz0IOOJLpGMy62t4Y/edit?gid=377376877#gid=377376877 and the mechanism/predicate/qualifier mappings here: https://docs.google.com/spreadsheets/d/1DeAE04O1mz3R9s3dCZpG2hQp9hwif5WjdkUMsBci-u8/edit?gid=461277142#gid=461277142
      # Qi review comment: you are correct, I have fixed it to be the columns actually used in the ingest.py
      ## Endogenous for future?
      fields_used: "Ligand, Target, Ligand ID, Target UniProt ID, Type, Action, PubMed ID"
    - file_name: "ligands.csv"
      fields_used: 'Ligand ID, PubChem CID'

    # MHB: Qi, can you update included_records and fields_used in objects below to match conventions / suggestions above. Remember, the ingest_info section of the RIG just describes what content we take from the source, and what we leave behind.  It doesn't describe how we model it. THat goes in the target_info section that follows.
    ## Qi review comments: not used
    #
    # - file_name: "targets_and_families.csv"
    #   included_records: "subject: ChemicalEntity, MolecularMixture, SmallMolecule; object: Gene; Predicate: directly_physically_interacts_with"
    #   fields_used: "Type,	Family id,	Family name,	Target id,	Target name,	Subunit id,	Subunit name,	Target systematic name,	Target abbreviated name,	synonyms,	HGNC id,	HGNC symbol,	HGNC name,	Human genetic localisation,	Human nucleotide RefSeq,	Human protein RefSeq,	Human SwissProt,	Human Entrez Gene,	Human Ensembl Gene,	RGD id,	RGD symbol,	RGD name,	Rat genetic localisation,	Rat nucleotide RefSeq,	Rat protein RefSeq,	Rat SwissProt,	Rat Entrez Gene,	Rat Ensembl Gene,	MGI id,	MGI symbol	MGI name	Mouse genetic localisation	Mouse nucleotide RefSeq	Mouse protein RefSeq	Mouse SwissProt	Mouse Entrez Gene	Mouse Ensembl Gene"
    # - file_name: "ligands.csv"
    #   included_records: ""
    #   fields_used: "Ligand ID	Name	Species	Type	Approved	Withdrawn	Labelled	Radioactive	PubChem SID	PubChem CID	UniProt ID	Ensembl ID	ChEMBL ID	Ligand Subunit IDs	Ligand Subunit Name	Ligand Subunit UniProt IDs	Ligand Subunit Ensembl IDs	IUPAC name	INN	Synonyms	SMILES	InChIKey	InChI	GtoImmuPdb	GtoMPdb	Antibacterial"
    # - file_name: "peptides.csv"
    #   included_records: "subject: Small Molecule; object: Small Molecule; predicate: has_part; Only if Human in Species"
    #   fields_used: "Species, Ligand Id, Subunit Ids"
    # - file_name: "GtP_to_HGNC_mapping.csv"
    #   included_records: "Use GtP to HGNC mappings to convert Gene symbols to HGNC ids"    # I don't think you need to do this - GtoPdb gives ENSEMBL gene IDs, right - which I asusem Node Norm can map to the canonical id for genes of any species?
    #   fields_used: "HGNC Symbol,	HGNC ID,	IUPHAR Name,	IUPHAR ID"

  filtered_content:
    # - file_name: "peptides.csv"
    #   filtered_records: "remove records with species in: Mouse, Rat, Pig, Bovine, Sheep, Bovine, Dog, Rabbit, European common frog, Rhesus macaque"
    #   rationale: "Only include records with Human in Species"

  future_considerations:
    - category: edge_content
      consideration: "Consider ingest the file 'approved_drug_primary_target_interactions.csv' which contains approved drugs detailed interactions list"
    - category: edge_content
      consideration: "Consider ingest peptides.csv with species other than Human"
    # MHB: I added this future consideration as well, which is an important one
    - category: edge_property_content
      consideration: "Longer term, consider creating ExperimentalStudyResult objects to capture metadata for each experiment that supports an edge (e.g. affinity data, assay descriptions, and associated publications)"

## Information about the Graph Output by the ingest
## based on https://github.com/biolink/biolink-model/blob/master/predicate_mapping.yaml
# MHB: The mapping for GtpoP db is here: https://docs.google.com/spreadsheets/d/1DeAE04O1mz3R9s3dCZpG2hQp9hwif5WjdkUMsBci-u8/edit?gid=461277142#gid=461277142  This is what you should be using - not the predicate-mapping file you reference above.
target_info:
  infores_id: infores:translator-gtopdb

  edge_type_info:
    - subject_categories:
        - biolink:ChemicalEntity
        - biolink:MolecularMixture
        - biolink:SmallMolecule
      predicates:
        - biolink:affects
      object_categories:
        - biolink:Gene
      qualifiers:
        - property: biolink:qualified_predicate
          value_enumerations:
              - causes
        - property: biolink:object_aspect_qualifier
          value_enumerations:
              - activity
        - property: biolink:object_direction_qualifier
          value_enumerations:
            - downregulated
            - upregulated
            - increased
            - decreased
        - property: biolink:causal_mechanism_qualifier
          value_range: CausalMechanismQualifierEnum
        ## Qi review comment - correct, those columns are not added in ingestion
        # - property: biolink:anatomical_context_qualifier              # MHB: I didn't see anything in the data that would allow us to capture an anatomical context?
        #   value_description: N/A
        # - property: biolink:species_context_qualifier                 # MHB: I don't think we need this, if it is based only on the species of the target Gene.
        #   value_description: String of species names to represent data in the gtopdb target species and ligand species columns.
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      edge_properties:
        ## Qi review comments - added publication column via pubmed id and dropped not existing columns of confidenc score and supporting text
        - biolink:publications
        # - biolink:has_confidence_score                               # MHB: I didn't see anything in the data that would allow us to capture this?
        # - biolink:supporting_text                                    # MHB: I didn't see anything in the data that would allow us to capture this?
      ui_explanation: "decision between up/down regulated or increased/decreased based on combination of type and action columns in gtopdb"
    - subject_categories:
        - biolink:ChemicalEntity
        - biolink:MolecularMixture
        - biolink:SmallMolecule
      predicates:
        - biolink:directly_physically_interacts
      object_categories:
        - biolink:Gene
      qualifiers:
        - property: biolink:causal_mechanism_qualifier
          value_range: CausalMechanismQualifierEnum
        ## Qi review comment - should be dropped
        # - property: biolink:anatomical_context_qualifier         # MHB: same note as above
        #   value_description: N/A
        # - property: biolink:species_context_qualifier            # MHB: same note as above
          # value_description: String of species names to represent data in the gtopdb target species and ligand species columns.
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      edge_properties:
        # - biolink:endogenous                                     # MHB: no include this - it is just a cue for when to use affects vs regualtes
        # - biolink:primaryTarget                                  # MHB: no include this for now
        - biolink:publications
      ui_explanation: "this separate directly_physically_interacts edge is created when the endogenous column == True"    # MHB: No, the value of the Endogenous column indicates if we use 'affectd' vs 'regulates' as the predicate, and 'inc/dec' vs 'upreg/downreg' as the direction.  The mapping table here indicates when an additional physically_interacts_with edge is created: https://docs.google.com/spreadsheets/d/1DeAE04O1mz3R9s3dCZpG2hQp9hwif5WjdkUMsBci-u8/edit?gid=461277142#gid=461277142


  node_type_info:                                     # MHB: Note that we want to use the Pubchem CID here for all chemical entities - not SIDs (SIDs are too granular).  Vlado says the ligands.tsv file may have a mapping you can use to map SIDs to CIDs, and use CIDs on your nodes.
                                                      ## Qi: I am using the ligand id directly from the interactions csv file now...didn't notice this comment of using Pubchem CID only, the ligands.tsv file does have a mapping between them
                                                      ## however I need an example ingest.py code to show how koza model handle multiple files
    - node_category: biolink:ChemicalEntity
      source_identifier_types:
        - "Ligand ID"                               # MHB: value of this field should be just a prefix, and the description field can report more detail (e.g. that it is an SID)
    - node_category: biolink:MolecularMixture
      source_identifier_types:
        - "Ligand ID"
    - node_category: biolink:SmallMolecule
      source_identifier_types:
        - "Ligand ID"
    - node_category: biolink:Gene
      source_identifier_types:
        - "UniProt ID"
  future_considerations:
    - category: node_content
      consideration: "Considering future new biolink node types: stimulus and fusion protein for more accurate mapping into Biolink model"

# Information about the how the ingest was specified and performed
provenance_info:
  contributions:
    - "Qi Wei: code author, data modeling"
    - "Yue Zhang: data modeling"
    - "Guangrong Qin: data modeling, domain expertise"
    - "Sierra Moxon: code support"
    - "Matthew Brush: data modeling, domain expertise"
  artifacts:
    - "Ingest Survey: https://docs.google.com/spreadsheets/d/1c6M71yrPNGTvH-LeKR75nf5iFOfz0IOOJLpGMy62t4Y/edit?gid=583858205#gid=583858205"
    - "Ingest Ticket: "
