# MHB: general note based on the data examples you shared - you reported infores:Biolink as an aggregator on all edges - this is not correct.  No aggregator needed in these KGX ingest files (unless the external source is itself an aggregator)
# AB: Addressed - All PathBank edges use PathBank as the primary knowledge source and do not list infores:biolink as an aggregator.
name: PathBank Reference Ingest Guide (RIG)

source_info:
  infores_id: infores:pathbank
  name: PathBank
  description: "PathBank is a comprehensive, visually rich pathway database (>110k pathways) providing machine-readable exports (PWML, BioPAX, SBML, SBGN) and CSV summaries for pathway metadata and links."
  citations:
    - "PathBank NAR article: https://doi.org/10.1093/nar/gkz861"
    - "Downloads page: https://pathbank.org/downloads"
  terms_of_use_info:
    terms_of_use_url: "https://pathbank.org/about"
    license_name: "See PathBank About/Downloads for reuse and citation guidance"
  data_access_locations:
    - "All downloads: https://pathbank.org/downloads"
  data_provision_mechanisms:
    - file_download
  data_formats:
    - csv
    - pwml
  data_versioning_and_releases: "Treat each pull as a dated snapshot; downloads list 'Generated On' timestamps and large per-format archives."

ingest_info:
  ingest_categories:
    - primary_knowledge_provider
  utility: "Comprehensive pathway membership and mechanistic process data (reactions, transports, interactions) for Translator reasoning and pathway-centric analytics."
  scope: "This ingest uses only two inputs: the master pathways CSV for biolink:Pathway nodes and the PWML archive for entities, processes, and edges. Other formats available from PathBank (BioPAX, SBML, SBGN, RXN, SVG, PNG, FASTA, SDF) are not currently used but may be considered for future enrichment."

  relevant_files:
    - file_name: "pathbank_all_pathways.csv.zip"
      location: "https://pathbank.org/downloads"
      description: "Master CSV with pathway subjects and descriptions; used to build Pathway nodes with IDs, names, descriptions, and species metadata."
    - file_name: "pathbank_all_pwml.zip"
      location: "https://pathbank.org/downloads"
      description: "Per-pathway PWML files for detailed composition and connectivity (entities, processes, participants, localization, complexes)."

  included_content:
    - file_name: "pathbank_all_pathways.csv.zip"
      included_records: "All pathway rows extracted to pathbank_pathways.csv"
      fields_used: "SMPDB ID, PW ID, Name, Description"
    - file_name: "pathbank_all_pwml.zip"
      included_records: "All PWML pathway files"
      fields_used: "entities (compounds, proteins, complexes, nucleic acids), processes (reactions, transports, interactions), participants (inputs/outputs), enzymes/transporters, localization (compartments/tissues)"

  # Note: filtered_content is omitted because all records from the included files (pathbank_pathways.csv and PWML files) are used without filtering.

  future_considerations:
    - category: edge_property_content
      consideration: "Edge properties such as stoichiometry and participant_role - may be added in future if needed and if supported by Biolink Model"
    - category: edge_content
      consideration: "Additional file formats available from PathBank (BioPAX, SBML, SBGN, RXN, SVG, PNG, FASTA, SDF) may be considered for future enrichment to provide additional pathway representations and visualizations"
    - category: edge_content
      consideration: "Additional interaction type mappings may be added as more PathBank interaction types are discovered and validated against Biolink Model predicates"
    
target_info:
  infores_id: infores:translator-pathbank-kgx
  edge_type_info:
    - subject_categories:
        - biolink:Pathway
      # MHB: Use has_particpant for consistency with other sources/edges like this.
      # AB: Addressed - Pathway membership edges use biolink:has_participant in the ingest.
      predicate: biolink:has_participant
      object_categories:
        - biolink:SmallMolecule
        - biolink:Protein
        - biolink:NucleicAcidEntity
        - biolink:MacromolecularComplex
        - biolink:ChemicalEntity
        - biolink:MolecularActivity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      ui_explanation: "Pathway has the specified entity as a participant (from PWML membership and context)."

    - subject_categories:
        - biolink:MolecularActivity
      # MHB: This is supported by Biolink, but longer term consider is this the most useful pattern for Translator? Could we model direct 'derived from/into' edges between inputs and outputs and hang the reaction id as a qualifier
      # AB: Future work & consideration - Current pattern uses MolecularActivity with has_input/has_output. A redesign to direct input-output edges with reaction qualifiers would need an agreed KG modeling pattern across sources.
      predicate: biolink:has_input
      object_categories:
        - biolink:SmallMolecule
        - biolink:Protein
        - biolink:NucleicAcidEntity
        - biolink:MacromolecularComplex
        - biolink:ChemicalEntity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      ui_explanation: "Reaction (molecular activity) consumes specified inputs (reactants) extracted from PWML participants."

    - subject_categories:
        - biolink:MolecularActivity
      predicate: biolink:has_output
      object_categories:
        - biolink:SmallMolecule
        - biolink:Protein
        - biolink:NucleicAcidEntity
        - biolink:MacromolecularComplex
        - biolink:ChemicalEntity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      ui_explanation: "Reaction (molecular activity) produces specified outputs (products) as defined in PWML."

    - subject_categories:
        - biolink:MacromolecularComplex
      predicate: biolink:catalyzes
      object_categories:
        - biolink:MolecularActivity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      ui_explanation: "Enzyme or protein complex catalyzes the specified reaction (molecular activity) as identified in PWML."

    - subject_categories:
        - biolink:MacromolecularComplex
      # MHB: here we might use the more specific predicate has_component? But i see all that is in Biolink now is 'has_food_component?  Could we generalize this relation?
      # AB: Addressed - biolink:has_part is used for complex composition; biolink:has_component is not available for this use case in Biolink.
      predicate: biolink:has_part
      object_categories:
        - biolink:Protein
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      ui_explanation: "Complex contains specified proteins per PWML composition."

    - subject_categories:
        - biolink:Protein
        - biolink:MacromolecularComplex
        - biolink:SmallMolecule
        - biolink:ChemicalEntity
      # MHB: can we dig into the data behind these edges - to see if we can be more precise/detailed w.r.t. our predicate (and possibly qualifiers) - based on interaction types Pathbank provides.
      # AB: Addressed - PWML interaction types are mapped to regulates (with qualifiers), physically_interacts_with, and interacts_with (fallback).
      predicate: biolink:regulates
      qualifiers:
        - property: biolink:qualified_predicate
          value_enumeration:
            - "biolink:causes"
        - property: biolink:object_aspect_qualifier
          value_range:
            - biolink:GeneOrGeneProductOrChemicalEntityAspectEnum
        - property: biolink:object_direction_qualifier
          value_range:
            - biolink:DirectionQualifierEnum
      object_categories:
        - biolink:Protein
        - biolink:MacromolecularComplex
        - biolink:SmallMolecule
        - biolink:ChemicalEntity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      ui_explanation: "Directional regulation edges derived from PWML interaction types. Qualifiers specify affected aspect and direction when available."

    - subject_categories:
        - biolink:Protein
        - biolink:MacromolecularComplex
        - biolink:SmallMolecule
        - biolink:ChemicalEntity
      predicate: biolink:physically_interacts_with
      object_categories:
        - biolink:Protein
        - biolink:MacromolecularComplex
        - biolink:SmallMolecule
        - biolink:ChemicalEntity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      ui_explanation: "Physical interactions derived from PWML interaction types such as binding or complex formation."

    - subject_categories:
        - biolink:Protein
        - biolink:MacromolecularComplex
        - biolink:SmallMolecule
        - biolink:ChemicalEntity
      predicate: biolink:interacts_with
      object_categories:
        - biolink:Protein
        - biolink:MacromolecularComplex
        - biolink:SmallMolecule
        - biolink:ChemicalEntity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      ui_explanation: "Fallback interaction predicate for PWML interaction types that cannot be mapped more specifically."

    - subject_categories:
        - biolink:Pathway
      predicate: biolink:occurs_in
      object_categories:
        - biolink:CellularComponent
        - biolink:AnatomicalEntity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      ui_explanation: "Pathway localization to subcellular compartments (GO terms) and tissues (BTO terms) as specified in PWML data."

  node_type_info:
    - node_category: biolink:Pathway
      source_identifier_types:
        - "Preferred: SMPDB pathway IDs from pathbank_pathways.csv (emitted as SMPDB:<id>)"
        - "Fallback: PathBank PW IDs from pathbank_pathways.csv (emitted as PathBank:PW<id> when SMPDB is missing)"
      # MHB: Did we decide all equivalence relationships would be the purview of the ontology group and NN/CoCo?
      # AB: Addressed - The ingest stores alternate identifiers in node xref rather than emitting biolink:same_as edges.
      additional_notes: "When SMPDB is present, the PW identifier is stored in node xref for traceability. Biolink class reference: https://biolink.github.io/biolink-model/Pathway/"
    - node_category: biolink:SmallMolecule
      source_identifier_types:
        - "Preferred: ChEBI, DrugBank, KEGG.COMPOUND identifiers from PWML when available (emitted as primary id)"
        - "Fallback: PathBank compound IDs (emitted as PathBank:Compound_<id>)"
      additional_notes: "Non-primary identifiers are stored in node xref for traceability. Biolink class reference: https://biolink.github.io/biolink-model/SmallMolecule/"
    - node_category: biolink:Protein
      source_identifier_types:
        - "Preferred: UniProtKB identifiers from PWML when available (emitted as primary id)"
        - "Fallback: PathBank protein IDs (emitted as PathBank:Protein_<id>)"
      additional_notes: "Non-primary identifiers are stored in node xref for traceability. Biolink class reference: https://biolink.github.io/biolink-model/Protein/"
    - node_category: biolink:MacromolecularComplex
      source_identifier_types:
        - "PathBank protein complex IDs (emitted as PathBank:ProteinComplex_<id>)"
      additional_notes: "Complexes are composed of proteins (linked via biolink:has_part edges). Biolink class reference: https://biolink.github.io/biolink-model/MacromolecularComplex/"
    - node_category: biolink:NucleicAcidEntity
      source_identifier_types:
        - "Preferred: ChEBI identifiers from PWML when available (emitted as primary id)"
        - "Fallback: PathBank nucleic acid IDs (emitted as PathBank:NucleicAcid_<id>)"
      additional_notes: "Non-primary identifiers are stored in node xref for traceability. Biolink class reference: https://biolink.github.io/biolink-model/NucleicAcidEntity/"
    - node_category: biolink:MolecularActivity
      source_identifier_types:
        - "Preferred when available: EC identifiers from PWML reaction ec-number fields (emitted as EC:<id>)"
        - "Fallback: PathBank reaction IDs (emitted as PathBank:Reaction_<id>)"
      additional_notes: "Reactions are represented as MolecularActivity nodes with has_input and has_output edges. Biolink class reference: https://biolink.github.io/biolink-model/MolecularActivity/"
    - node_category: biolink:ChemicalEntity
      source_identifier_types:
        - "Bounds: PathBank bound IDs (emitted as PathBank:Bound_<id>)"
        - "Element collections: external identifiers when available (ChEBI, UniProtKB, KEGG.COMPOUND) emitted as primary id, otherwise PathBank:ElementCollection_<id>"
      additional_notes: "Non-primary identifiers are stored in node xref for traceability. Biolink class reference: https://biolink.github.io/biolink-model/ChemicalEntity/"
    - node_category: biolink:CellularComponent
      source_identifier_types:
        - "GO (Gene Ontology) identifiers for subcellular locations (e.g., GO:0005737 for Cytoplasm)"
      additional_notes: "Subcellular compartments extracted from PWML data. Biolink class reference: https://biolink.github.io/biolink-model/CellularComponent/"
    - node_category: biolink:AnatomicalEntity
      source_identifier_types:
        - "BTO (BRENDA Tissue Ontology) identifiers for tissues (e.g., BTO:0000759 for Liver)"
      additional_notes: "Tissues and anatomical entities extracted from PWML data. Biolink class reference: https://biolink.github.io/biolink-model/AnatomicalEntity/"

provenance_info:
  contributions:
    - "Adilbek Bazarkulov: code implementation, support"
    - "Erica Wood: code author (RTX-KG2)"
    - "Evan Morris: code support"
    - "Sierra Moxon: data modeling, domain expertise"
    - "Matthew Brush: data modeling, domain expertise"
  artifacts:
    - "PathBank downloads: https://pathbank.org/downloads"
    - "Biolink Model repository: https://github.com/biolink/biolink-model"
    - "Biolink Model docs: https://biolink.github.io/biolink-model/"
    - "KGX docs: https://biolink.github.io/kgx/"
