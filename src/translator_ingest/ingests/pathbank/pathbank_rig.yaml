name: PathBank Reference Ingest Guide (RIG)

source_info:
  infores_id: infores:pathbank
  name: PathBank
  description: "PathBank is a comprehensive, visually rich pathway database (>110k pathways) providing machine-readable exports (PWML, BioPAX, SBML, SBGN) and CSV summaries for pathway metadata and links."
  citations:
    - "PathBank NAR article: https://doi.org/10.1093/nar/gkz861"
    - "Downloads page: https://pathbank.org/downloads"
  terms_of_use_info:
    terms_of_use_url: "https://pathbank.org/about"
    license_name: "See PathBank About/Downloads for reuse and citation guidance"
  data_access_locations:
    - "All downloads: https://pathbank.org/downloads"
  data_provision_mechanisms:
    - file_download
  data_formats:
    - csv
    - pwml
  data_versioning_and_releases: "Treat each pull as a dated snapshot; downloads list 'Generated On' timestamps and large per-format archives."

ingest_info:
  ingest_categories:
    - primary_knowledge_provider
  utility: "Comprehensive pathway membership and mechanistic process data (reactions, transports, interactions) for Translator reasoning and pathway-centric analytics."
  scope: "This ingest uses only two inputs: the master pathways CSV for biolink:Pathway nodes and the PWML archive for entities, processes, and edges. Other formats available from PathBank (BioPAX, SBML, SBGN, RXN, SVG, PNG, FASTA, SDF) are not currently used but may be considered for future enrichment."

  relevant_files:
    - file_name: "pathbank_all_pathways.csv.zip"
      location: "https://pathbank.org/downloads"
      description: "Master CSV with pathway subjects and descriptions; used to build Pathway nodes with IDs, names, descriptions, and species metadata."
    - file_name: "pathbank_all_pwml.zip"
      location: "https://pathbank.org/downloads"
      description: "Per-pathway PWML files for detailed composition and connectivity (entities, processes, participants, localization, complexes)."

  included_content:
    - file_name: "pathbank_all_pathways.csv.zip"
      included_records: "All pathway rows extracted to pathbank_pathways.csv"
      fields_used: "SMPDB ID, PW ID, Name, Description"
    - file_name: "pathbank_all_pwml.zip"
      included_records: "All PWML pathway files"
      fields_used: "entities (compounds, proteins, complexes, nucleic acids), processes (reactions, transports, interactions), participants (inputs/outputs), enzymes/transporters, localization (compartments/tissues)"

  # Note: filtered_content is omitted because all records from the included files (pathbank_pathways.csv and PWML files) are used without filtering.

  future_considerations:
    - category: edge_property_content
      consideration: "Edge properties such as stoichiometry and participant_role - may be added in future if needed and if supported by Biolink Model"
    - category: edge_content
      consideration: "Additional file formats available from PathBank (BioPAX, SBML, SBGN, RXN, SVG, PNG, FASTA, SDF) may be considered for future enrichment to provide additional pathway representations and visualizations"
    - category: edge_content
      consideration: "Additional interaction type mappings may be added as more PathBank interaction types are discovered and validated against Biolink Model predicates"
    
target_info:
  infores_id: infores:translator-pathbank-kgx
  edge_type_info:
    - subject_categories:
        - biolink:Pathway
      predicate: biolink:has_participant
      object_categories:
        - biolink:SmallMolecule
        - biolink:Protein
        - biolink:NucleicAcidEntity
        - biolink:MacromolecularComplex
        - biolink:ChemicalEntity
        - biolink:MolecularActivity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      primary_knowledge_sources:
        - infores:pathbank
      ui_explanation: "Pathway has the specified entity as a participant (from PWML membership and context)."
      source_files:
        - (file name here)
        
    - subject_categories:
        - biolink:MolecularActivity
      predicate: biolink:has_input
      object_categories:
        - biolink:SmallMolecule
        - biolink:Protein
        - biolink:NucleicAcidEntity
        - biolink:MacromolecularComplex
        - biolink:ChemicalEntity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      primary_knowledge_sources:
        - infores:pathbank        
      ui_explanation: "Reaction (molecular activity) consumes specified inputs (reactants) extracted from PWML participants."
      source_files:
        - (file name here)
        
    - subject_categories:
        - biolink:MolecularActivity
      predicate: biolink:has_output
      object_categories:
        - biolink:SmallMolecule
        - biolink:Protein
        - biolink:NucleicAcidEntity
        - biolink:MacromolecularComplex
        - biolink:ChemicalEntity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      primary_knowledge_sources:
        - infores:pathbank        
      ui_explanation: "Reaction (molecular activity) produces specified outputs (products) as defined in PWML."
      source_files:
        - (file name here)
        
    - subject_categories:
        - biolink:MacromolecularComplex
      predicate: biolink:catalyzes
      object_categories:
        - biolink:MolecularActivity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      primary_knowledge_sources:
        - infores:pathbank        
      ui_explanation: "Enzyme or protein complex catalyzes the specified reaction (molecular activity) as identified in PWML."
      source_files:
        - (file name here)
        
    - subject_categories:
        - biolink:MacromolecularComplex
      predicate: biolink:has_part
      object_categories:
        - biolink:Protein
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      primary_knowledge_sources:
        - infores:pathbank        
      ui_explanation: "Complex contains specified proteins per PWML composition."
      source_files:
        - (file name here)
        
    - subject_categories:
        - biolink:Protein
        - biolink:MacromolecularComplex
        - biolink:SmallMolecule
        - biolink:ChemicalEntity
      predicate: biolink:regulates
      qualifiers:
        - property: biolink:qualified_predicate
          value_enumeration:
            - "biolink:causes"
        - property: biolink:object_aspect_qualifier
          value_range:
            - biolink:GeneOrGeneProductOrChemicalEntityAspectEnum
        - property: biolink:object_direction_qualifier
          value_range:
            - biolink:DirectionQualifierEnum
      object_categories:
        - biolink:Protein
        - biolink:MacromolecularComplex
        - biolink:SmallMolecule
        - biolink:ChemicalEntity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      primary_knowledge_sources:
        - infores:pathbank        
      ui_explanation: "Directional regulation edges derived from PWML interaction types. Qualifiers specify affected aspect and direction when available."
      source_files:
        - (file name here)
        
    - subject_categories:
        - biolink:Protein
        - biolink:MacromolecularComplex
        - biolink:SmallMolecule
        - biolink:ChemicalEntity
      predicate: biolink:physically_interacts_with
      object_categories:
        - biolink:Protein
        - biolink:MacromolecularComplex
        - biolink:SmallMolecule
        - biolink:ChemicalEntity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      primary_knowledge_sources:
        - infores:pathbank        
      ui_explanation: "Physical interactions derived from PWML interaction types such as binding or complex formation."
      source_files:
        - (file name here)
        
    - subject_categories:
        - biolink:Protein
        - biolink:MacromolecularComplex
        - biolink:SmallMolecule
        - biolink:ChemicalEntity
      predicate: biolink:interacts_with
      object_categories:
        - biolink:Protein
        - biolink:MacromolecularComplex
        - biolink:SmallMolecule
        - biolink:ChemicalEntity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      primary_knowledge_sources:
        - infores:pathbank        
      ui_explanation: "Fallback interaction predicate for PWML interaction types that cannot be mapped more specifically."
      source_files:
        - (file name here)
        
    - subject_categories:
        - biolink:Pathway
      predicate: biolink:occurs_in
      object_categories:
        - biolink:CellularComponent
        - biolink:AnatomicalEntity
      knowledge_level:
        - knowledge_assertion
      agent_type:
        - manual_agent
      primary_knowledge_sources:
        - infores:pathbank        
      ui_explanation: "Pathway localization to subcellular compartments (GO terms) and tissues (BTO terms) as specified in PWML data."
      source_files:
        - (file name here)

  node_type_info:
    - node_category: biolink:Pathway
      source_identifier_types:
        - "Preferred: SMPDB pathway IDs from pathbank_pathways.csv (emitted as SMPDB:<id>)"
        - "Fallback: PathBank PW IDs from pathbank_pathways.csv (emitted as PathBank:PW<id> when SMPDB is missing)"
      additional_notes: "When SMPDB is present, the PW identifier is stored in node xref for traceability. Biolink class reference: https://biolink.github.io/biolink-model/Pathway/"
    - node_category: biolink:SmallMolecule
      source_identifier_types:
        - "Preferred: ChEBI, DrugBank, KEGG.COMPOUND identifiers from PWML when available (emitted as primary id)"
        - "Fallback: PathBank compound IDs (emitted as PathBank:Compound_<id>)"
      additional_notes: "Non-primary identifiers are stored in node xref for traceability. Biolink class reference: https://biolink.github.io/biolink-model/SmallMolecule/"
    - node_category: biolink:Protein
      source_identifier_types:
        - "Preferred: UniProtKB identifiers from PWML when available (emitted as primary id)"
        - "Fallback: PathBank protein IDs (emitted as PathBank:Protein_<id>)"
      additional_notes: "Non-primary identifiers are stored in node xref for traceability. Biolink class reference: https://biolink.github.io/biolink-model/Protein/"
    - node_category: biolink:MacromolecularComplex
      source_identifier_types:
        - "PathBank protein complex IDs (emitted as PathBank:ProteinComplex_<id>)"
      additional_notes: "Complexes are composed of proteins (linked via biolink:has_part edges). Biolink class reference: https://biolink.github.io/biolink-model/MacromolecularComplex/"
    - node_category: biolink:NucleicAcidEntity
      source_identifier_types:
        - "Preferred: ChEBI identifiers from PWML when available (emitted as primary id)"
        - "Fallback: PathBank nucleic acid IDs (emitted as PathBank:NucleicAcid_<id>)"
      additional_notes: "Non-primary identifiers are stored in node xref for traceability. Biolink class reference: https://biolink.github.io/biolink-model/NucleicAcidEntity/"
    - node_category: biolink:MolecularActivity
      source_identifier_types:
        - "Preferred when available: EC identifiers from PWML reaction ec-number fields (emitted as EC:<id>)"
        - "Fallback: PathBank reaction IDs (emitted as PathBank:Reaction_<id>)"
      additional_notes: "Reactions are represented as MolecularActivity nodes with has_input and has_output edges. Biolink class reference: https://biolink.github.io/biolink-model/MolecularActivity/"
    - node_category: biolink:ChemicalEntity
      source_identifier_types:
        - "Bounds: PathBank bound IDs (emitted as PathBank:Bound_<id>)"
        - "Element collections: external identifiers when available (ChEBI, UniProtKB, KEGG.COMPOUND) emitted as primary id, otherwise PathBank:ElementCollection_<id>"
      additional_notes: "Non-primary identifiers are stored in node xref for traceability. Biolink class reference: https://biolink.github.io/biolink-model/ChemicalEntity/"
    - node_category: biolink:CellularComponent
      source_identifier_types:
        - "GO (Gene Ontology) identifiers for subcellular locations (e.g., GO:0005737 for Cytoplasm)"
      additional_notes: "Subcellular compartments extracted from PWML data. Biolink class reference: https://biolink.github.io/biolink-model/CellularComponent/"
    - node_category: biolink:AnatomicalEntity
      source_identifier_types:
        - "BTO (BRENDA Tissue Ontology) identifiers for tissues (e.g., BTO:0000759 for Liver)"
      additional_notes: "Tissues and anatomical entities extracted from PWML data. Biolink class reference: https://biolink.github.io/biolink-model/AnatomicalEntity/"

    future_considerations:  # (optional, multivalued, range = FutureModelingConsiderations) Notes on possible changes/additions to modeling in future iteration of the ingest
      - category: spoq_pattern
        consideration: "MolecularActivity nodes represent reactions.  Current modeling creates separate edges describing inputs and outputs for these reactions. This is supported by Biolink, but longer term consider is this the most useful pattern for Translator? Could we model direct 'derived from/into' edges between inputs and outputs and hang the reaction id as a qualifier? A redesign to direct input-output edges with reaction qualifiers would need an agreed KG modeling pattern across sources."

# Manual QA 1: Known issues identified during validation
known_issues:
  # Most PathBank edges involve MolecularActivity and MacromolecularComplex nodes
  # that use internal PathBank IDs. NodeNorm doesn't recognize these, so ~88% of
  # edges get dropped during normalization.
  - issue: "Large normalization drop (~88% of edges)"
    description: |
      PathBank internal IDs (Reaction_, ProteinComplex_, some Compound_) are not
      recognized by NodeNorm. The ingest correctly produces 12.8M edges, but 11.3M
      are filtered out because subject or object nodes fail normalization.
    resolution: "Long-term: Request NodeNorm support for PathBank IDs or map reactions to EC numbers."

  # The RIG documents predicates like has_input, has_output, catalyzes, has_part,
  # regulates, physically_interacts_with - but these only appear on edges involving
  # MolecularActivity or MacromolecularComplex nodes that fail normalization.
  - issue: "Missing predicates in normalized output"
    description: |
      Predicates like has_input, has_output, catalyzes, has_part, regulates, and
      physically_interacts_with are correctly emitted by the ingest but only appear
      on edges involving MolecularActivity/MacromolecularComplex nodes. These nodes
      fail NodeNorm, so the edges are dropped.
    resolution: "Long-term: Depends on fixing normalization drop. Final output only has has_participant, occurs_in, interacts_with."

  # Biolink has_participant expects an "occurrent" (process/event) as object,
  # but PathBank pathways correctly have chemicals and proteins as participants.
  - issue: "Validation warnings for has_participant range"
    description: |
      66,656 validation warnings occur because biolink:has_participant expects
      range 'occurrent' but objects are SmallMolecule, Protein, Drug, etc.
      The data is semantically correct - pathways do have these participants.
    resolution: "Accepted as warnings. The edges are valid pathway membership assertions."

  # One GO term (GO:0043165) normalized to BiologicalProcess instead of CellularComponent
  - issue: "occurs_in edge to BiologicalProcess"
    description: |
      1 edge has a BiologicalProcess object (from GO term normalization) instead
      of the expected CellularComponent or AnatomicalEntity. This happens when
      a GO cellular component term gets normalized to a process category.
    resolution: "Accepted as edge case. The edge is valid but doesn't match RIG's expected object categories."

provenance_info:
  contributions:
    - "Adilbek Bazarkulov: code implementation, support"
    - "Erica Wood: code author (RTX-KG2)"
    - "Evan Morris: code support"
    - "Sierra Moxon: data modeling, domain expertise"
    - "Matthew Brush: data modeling, domain expertise"
  artifacts:
    - "PathBank downloads: https://pathbank.org/downloads"
    - "Biolink Model repository: https://github.com/biolink/biolink-model"
    - "Biolink Model docs: https://biolink.github.io/biolink-model/"
    - "KGX docs: https://biolink.github.io/kgx/"
